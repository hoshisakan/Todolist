(this["webpackJsonptodolist-app"]=this["webpackJsonptodolist-app"]||[]).push([[0],{115:function(e,t,a){},117:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(26),s=a.n(r),o=(a(87),a(33)),i=a(8),l=a.n(i),j=a(11),d=a(12),u=a(47),b=a(4),h=a(13),O=a(132),f=a(124),x=a(133),m=a(128),p=a(80),v=a(125),g=a(126),y=a(27),S=(a(30),a(66)),k=a.n(S),w=k.a.create({baseURL:"http://192.168.1.112:9001/api/users",headers:{"Content-Type":"application/json",Accept:"application/json"}}),_=k.a.create({baseURL:"http://192.168.1.112:9001/api/book",headers:{"Content-Type":"application/json",Accept:"application/json"}}),N=function(e){return w.post("/token-refresh",e)},C=function(){return w.get("/profile",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}})},I=function(e){return w.post("/logout",e)},z=function(e){return w.post("/validate-account",e)},R=function(e,t){return _.get("",{params:{order_by:e,is_checked:t},headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}})},L=function(e){return _.post("",e,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}})},D=function(e,t){return _.put("/".concat(e),t,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}})},P=function(e){return _.delete("/".concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}})},A=function(e,t){return _.patch("/".concat(e),{is_read:t},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}})},T=a(130),U=a(134),E=a(131),W=a(123),B=a(81),G=a(1);function H(e){var t=e.setRequestUpdate,a=e.id,c=e.title,r=e.author,s=e.price,o=e.isRead,i=e.nationality,d=e.url,u=e.dueDate,h=e.lastModifyDate,O=e.createdAt,f=e.dueDays,x=e.willDueDays,m=e.currentWindowSize,v=e.cardColor,g=Object(n.useState)(a),y=Object(b.a)(g,2),S=y[0],k=y[1],w=Object(n.useState)(c),_=Object(b.a)(w,2),N=_[0],C=_[1],I=Object(n.useState)(r),z=Object(b.a)(I,2),R=z[0],L=z[1],H=Object(n.useState)(s),F=Object(b.a)(H,2),M=F[0],Y=F[1],K=Object(n.useState)(i),q=Object(b.a)(K,2),J=q[0],$=q[1],Q=Object(n.useState)(d),V=Object(b.a)(Q,2),X=V[0],Z=V[1],ee=Object(n.useState)(u),te=Object(b.a)(ee,2),ae=te[0],ne=te[1],ce=Object(n.useState)(!1),re=Object(b.a)(ce,2),se=re[0],oe=re[1],ie=Object(n.useState)(!1),le=Object(b.a)(ie,2),je=le[0],de=le[1],ue=Object(n.useState)(0),be=Object(b.a)(ue,2),he=be[0],Oe=be[1],fe=Object(n.useState)(!1),xe=Object(b.a)(fe,2),me=xe[0],pe=xe[1],ve=Object(n.useState)(!1),ge=Object(b.a)(ve,2),ye=ge[0],Se=ge[1],ke=Object(n.useState)(!1),we=Object(b.a)(ke,2),_e=we[0],Ne=we[1],Ce=Object(n.useState)(""),Ie=Object(b.a)(Ce,2),ze=Ie[0],Re=Ie[1],Le=Object(n.useState)(""),De=Object(b.a)(Le,2),Pe=De[0],Ae=De[1],Te=Object(n.useState)("33rem"),Ue=Object(b.a)(Te,2),Ee=Ue[0],We=Ue[1],Be=Object(n.useState)("45vh"),Ge=Object(b.a)(Be,2),He=Ge[0],Fe=Ge[1],Me=Object(n.useState)({x:0,y:0}),Ye=Object(b.a)(Me,2),Ke=Ye[0],qe=Ye[1],Je=Object(n.useState)(v),$e=Object(b.a)(Je,1)[0],Qe=Object(n.useState)(!1),Ve=Object(b.a)(Qe,2),Xe=Ve[0],Ze=Ve[1],et=function(){var e=Object(j.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Re(""),Ae(""),n={title:N,author:R,price:M,nationality:J,url:X,due_date:ae},e.next=4,D(a,n).then((function(e){e.data.is_updated&&(t(1),pe(!1),oe(!1))})).catch((function(e){var a=e.response.status,n=e.response.data.error;400===a&&(n.is_title_exists&&n.is_url_exists?(Re("The title has been exists"),Ae("The url has been exists"),Se(!0),Ne(!0)):n.is_title_exists&&!1===n.is_url_exists?(Re("The title has been exists"),Se(!0),Ne(!1)):!1===n.is_title_exists&&n.is_url_exists&&(Ae("The url has been exists"),Se(!1),Ne(!0))),t(-1)}));case 4:Ze(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),tt=function(){var e=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(a).then((function(e){t(1)})).catch((function(e){t(-1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),at=function(){var e=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:de(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),nt=function(){var e=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(a,!0).then((function(e){t(1)})).catch((function(e){t(-1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ct=Object(n.useCallback)((function(){Xe&&(k(a),C(c),L(r),Y(s),$(i),Z(d),ne(u),Ze(!1))}),[r,Xe,u,a,i,s,c,d]),rt=Object(n.useCallback)((function(){Ke.x!==m.x&&(m.x<1e3?(We("23rem"),Fe("45vh")):m.x>=1e3&&m.x<=1600?(We("33rem"),Fe("43vh")):(We("40rem"),Fe("33vh")),qe(m))}),[m,Ke.x]);return Object(n.useEffect)((function(){ct(),rt()}),[ct,rt]),Object(G.jsxs)("div",{children:[Object(G.jsx)("div",{children:Object(G.jsxs)(T.a,{show:je,backdrop:"static",keyboard:!1,children:[Object(G.jsx)(T.a.Header,{style:{background:$e,color:"white"},children:Object(G.jsx)(T.a.Title,{children:Object(G.jsx)("p",{children:"Confirm action delete"})})}),Object(G.jsxs)(T.a.Body,{children:["Are you sure you want to delete this item ",Object(G.jsxs)("span",{style:{fontWeight:"bold"},children:[" ",c]})," ?"]}),Object(G.jsxs)(T.a.Footer,{style:{borderColor:$e},children:[Object(G.jsx)(p.a,{variant:"primary",onClick:tt,children:"Yes"}),Object(G.jsx)(p.a,{variant:"secondary",onClick:function(){de(!1)},children:"No"})]})]})}),Object(G.jsx)("div",{children:se&&a===he?Object(G.jsx)("div",{children:me?Object(G.jsx)("div",{className:"book-todo-root-1",children:Object(G.jsxs)(U.a,{style:{borderColor:$e,width:Ee},children:[Object(G.jsxs)(U.a.Header,{variant:"primary",className:"book-todo-card-header",style:{background:$e},children:["Edit ",c]}),Object(G.jsxs)(U.a.Body,{children:[Object(G.jsxs)(E.a.Group,{controlId:"formTitle",className:"align-items-left-2",children:[Object(G.jsx)(E.a.Label,{className:"form-horizontal.control-label",children:"Title"}),Object(G.jsx)(E.a.Control,{as:"textarea",placeholder:"Title",onChange:function(e){C(e.target.value)},value:N}),ye?Object(G.jsx)("p",{className:"field-error-remind",children:ze}):null]}),Object(G.jsxs)(W.a,{children:[Object(G.jsxs)(E.a.Group,{as:B.a,controlId:"formAuthor",className:"align-items-left-2",children:[Object(G.jsx)(E.a.Label,{className:"form-horizontal.control-label",children:"Author"}),Object(G.jsx)(E.a.Control,{type:"text",placeholder:"Author",onChange:function(e){L(e.target.value)},value:R})]}),Object(G.jsxs)(E.a.Group,{as:B.a,controlId:"formPrice",className:"align-items-left-2",children:[Object(G.jsx)(E.a.Label,{className:"form-horizontal.control-label",children:"Nationality"}),Object(G.jsx)(E.a.Control,{type:"text",placeholder:"Nationality",onChange:function(e){$(e.target.value)},value:J})]})]}),Object(G.jsxs)(E.a.Group,{controlId:"formPrice",className:"align-items-left-2",children:[Object(G.jsx)(E.a.Label,{className:"form-horizontal.control-label",children:"Price"}),Object(G.jsx)(E.a.Control,{type:"number",step:"any",placeholder:"Price",onChange:function(e){Y(e.target.value)},value:M})]}),Object(G.jsxs)(E.a.Group,{controlId:"formURL",className:"align-items-left-2",children:[Object(G.jsx)(E.a.Label,{className:"form-horizontal.control-label",children:"URL"}),Object(G.jsx)(E.a.Control,{type:"text",placeholder:"URL",onChange:function(e){Z(e.target.value)},value:X}),_e?Object(G.jsx)("p",{className:"field-error-remind",children:Pe}):null]}),Object(G.jsxs)(E.a.Group,{controlId:"formDueDate",className:"align-items-left-2",children:[Object(G.jsx)(E.a.Label,{className:"form-horizontal.control-label",children:"Due Date"}),Object(G.jsx)(E.a.Control,{type:"date",placeholder:"Due Date",onChange:function(e){ne(e.target.value)},value:ae,timeFormat:"YYYY-MM-DD"})]}),Object(G.jsxs)("div",{children:[Object(G.jsx)(p.a,{className:"book-todo-btn-2",variant:"primary",onClick:et,children:"Save changes"}),Object(G.jsx)(p.a,{className:"book-todo-btn-2",variant:"danger",onClick:function(){t(1),Ze(!0),pe(!1),oe(!1)},children:"Cancel"})]})]})]})}):null}):Object(G.jsx)("div",{className:"book-todo-root-1",style:{minHeight:He},children:Object(G.jsxs)(U.a,{style:{borderColor:$e,width:Ee},children:[Object(G.jsx)(U.a.Header,{variant:"primary",className:"book-todo-card-header",style:{background:$e},children:c}),Object(G.jsxs)(U.a.Body,{children:[Object(G.jsx)(U.a.Title,{children:f>0?Object(G.jsxs)("p",{children:["Due Date: ",u," ( Due ",f," days )"]}):Object(G.jsxs)("p",{children:["Due Date: ",u," ( Will due ",x," days )"]})}),Object(G.jsxs)(U.a.Text,{as:"div",style:{fontSize:"17px"},children:["Created At: ",O,Object(G.jsx)("br",{}),i," - ",r," - US$",s," - ",Object(G.jsx)("a",{href:d,children:"Link"}),Object(G.jsx)("br",{}),o?"Read":"Unread",Object(G.jsx)("br",{})]}),Object(G.jsxs)("div",{className:"book-todo-btn-group-1",children:[Object(G.jsx)(p.a,{className:"book-todo-btn-1",variant:"success",onClick:nt,children:"Complete"}),Object(G.jsx)(p.a,{className:"book-todo-btn-1",variant:"primary",onClick:function(){Ze(!0),Oe(S),oe(!0),pe(!0)},children:"Edit"}),Object(G.jsx)(p.a,{className:"book-todo-btn-1",variant:"danger",onClick:at,children:"Delete"})]})]}),Object(G.jsx)(U.a.Footer,{style:{borderColor:$e},children:Object(G.jsxs)("div",{style:{fontWeight:"bold"},children:["Last Modified: ",h]})})]})})})]})}function F(e){var t=e.setRequestUpdate,a=e.currentWindowSize,c=e.cardColor,r=Object(n.useState)(""),s=Object(b.a)(r,2),o=s[0],i=s[1],d=Object(n.useState)(""),u=Object(b.a)(d,2),h=u[0],O=u[1],f=Object(n.useState)(""),x=Object(b.a)(f,2),m=x[0],v=x[1],g=Object(n.useState)(""),y=Object(b.a)(g,2),S=y[0],k=y[1],w=Object(n.useState)(""),_=Object(b.a)(w,2),N=_[0],C=_[1],I=Object(n.useState)(""),z=Object(b.a)(I,2),R=z[0],D=z[1],P=Object(n.useState)(!1),A=Object(b.a)(P,2),T=A[0],H=A[1],F=Object(n.useState)(!1),M=Object(b.a)(F,2),Y=M[0],K=M[1],q=Object(n.useState)(""),J=Object(b.a)(q,2),$=J[0],Q=J[1],V=Object(n.useState)(""),X=Object(b.a)(V,2),Z=X[0],ee=X[1],te=Object(n.useState)({x:0,y:0}),ae=Object(b.a)(te,2),ne=ae[0],ce=ae[1],re=Object(n.useState)("28rem"),se=Object(b.a)(re,2),oe=se[0],ie=se[1],le=Object(n.useState)(c),je=Object(b.a)(le,1)[0],de=function(){i(""),O(""),v(""),k(""),C(""),D("")},ue=function(){var e=Object(j.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Q(""),ee(""),a={title:o,author:h,price:m,nationality:S,url:N,due_date:R},e.next=4,L(a).then((function(e){e.data.is_writed&&(de(),t(1))})).catch((function(e){console.error(e);var t=e.response.status,a=e.response.data.error;400===t&&(a.is_title_exists&&a.is_url_exists?(Q("The title has been exists"),ee("The url has been exists"),H(!0),K(!0)):a.is_title_exists&&!1===a.is_url_exists?(Q("The title has been exists"),H(!0),K(!1)):!1===a.is_title_exists&&a.is_url_exists&&(ee("The url has been exists"),H(!1),K(!0)))}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){ne.x!==a.x&&(a.x<1e3?ie("24rem"):a.x>=1e3&&a.x<=1600?ie("33em"):ie("40rem"),ce(a))}),[a,a.x,ne.x]),Object(G.jsx)("div",{children:Object(G.jsx)("div",{className:"book-todo-root-1",children:Object(G.jsxs)(U.a,{style:{borderColor:je,width:oe},children:[Object(G.jsx)(U.a.Header,{variant:"primary",className:"book-todo-card-header",style:{background:je},children:"Add Todo"}),Object(G.jsxs)(U.a.Body,{children:[Object(G.jsxs)(E.a.Group,{controlId:"formTitle",className:"align-items-left-2",children:[Object(G.jsx)(E.a.Label,{className:"form-horizontal.control-label",children:"Title"}),Object(G.jsx)(E.a.Control,{as:"textarea",placeholder:"Title",onChange:function(e){i(e.target.value)},value:o}),T?Object(G.jsx)("p",{className:"field-error-remind",children:$}):null]}),Object(G.jsxs)(W.a,{children:[Object(G.jsxs)(E.a.Group,{as:B.a,controlId:"formAuthor",className:"align-items-left-2",children:[Object(G.jsx)(E.a.Label,{className:"form-horizontal.control-label",children:"Author"}),Object(G.jsx)(E.a.Control,{type:"text",placeholder:"Author",onChange:function(e){O(e.target.value)},value:h})]}),Object(G.jsxs)(E.a.Group,{as:B.a,controlId:"formPrice",className:"align-items-left-2",children:[Object(G.jsx)(E.a.Label,{className:"form-horizontal.control-label",children:"Nationality"}),Object(G.jsx)(E.a.Control,{type:"text",placeholder:"Nationality",onChange:function(e){k(e.target.value)},value:S})]})]}),Object(G.jsxs)(E.a.Group,{controlId:"formPrice",className:"align-items-left-2",children:[Object(G.jsx)(E.a.Label,{className:"form-horizontal.control-label",children:"Price"}),Object(G.jsx)(E.a.Control,{type:"number",step:"any",placeholder:"Price",onChange:function(e){v(e.target.value)},value:m})]}),Object(G.jsxs)(E.a.Group,{controlId:"formURL",className:"align-items-left-2",children:[Object(G.jsx)(E.a.Label,{className:"form-horizontal.control-label",children:"URL"}),Object(G.jsx)(E.a.Control,{type:"text",placeholder:"URL",onChange:function(e){C(e.target.value)},value:N}),Y?Object(G.jsx)("p",{className:"field-error-remind",children:Z}):null]}),Object(G.jsxs)(E.a.Group,{controlId:"formDueDate",className:"align-items-left-2",children:[Object(G.jsx)(E.a.Label,{className:"form-horizontal.control-label",children:"Due Date"}),Object(G.jsx)(E.a.Control,{type:"date",placeholder:"Due Date",onChange:function(e){D(e.target.value)},value:R,timeFormat:"YYYY-MM-DD"})]}),Object(G.jsxs)("div",{children:[Object(G.jsx)(p.a,{className:"book-todo-btn-2",variant:"primary",onClick:function(){ue()},disabled:!(o.length>0&&h.length>0&&m.length>0&&S.length>0&&N.length>0&&R.length>0),children:"Save changes"}),Object(G.jsx)(p.a,{className:"book-todo-btn-2",variant:"danger",onClick:function(){de(),t(0)},children:"Cancel"})]})]})]})})})}var M=[{id:1,value:"due_date_first"},{id:2,value:"will_due_date_first"},{id:3,value:"latest_created_first"},{id:4,value:"oldest_created_first"},{id:5,value:"recent_last_modified_first"},{id:6,value:"oldest_last_modified_first"}],Y=a(129),K=function(e){return Object(Y.a)(new Date(e),"yyyy-MM-dd HH:mm:ss")};var q=function(e,t){var a=Object(n.useRef)(e);Object(n.useEffect)((function(){a.current=e}),[e]),Object(n.useEffect)((function(){if(null!==t){var e=setInterval((function(){return a.current()}),t);return function(){return clearInterval(e)}}}),[t])},J=function(){return{x:window.innerWidth,y:window.innerHeight}},$=["#28bf28","#ff0000","#0000ff","#1e90ff","#ffa500","#800080","#000080","#0047ab","#ff8c00","#1e90ff","#9acd32","#ff1493","#0000cd","#fa8072"],Q=function(){return $[Math.floor(Math.random()*$.length)]};function V(e){var t=e.setRequestUpdate,a=e.id,c=e.title,r=e.author,s=e.price,o=e.isRead,i=e.nationality,d=e.url,u=e.dueDate,h=e.lastModifyDate,O=e.dueDays,f=e.createdAt,x=e.currentWindowSize,m=e.cardColor,v=Object(n.useState)("33rem"),g=Object(b.a)(v,2),y=g[0],S=g[1],k=Object(n.useState)("43vh"),w=Object(b.a)(k,2),_=w[0],N=w[1],C=Object(n.useState)({x:0,y:0}),I=Object(b.a)(C,2),z=I[0],R=I[1],L=Object(n.useState)(m),D=Object(b.a)(L,1)[0],P=function(){var e=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(a,!1).then((function(e){t(1)})).catch((function(e){t(-1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){z.x!==x.x&&(x.x<1e3?(S("24rem"),N("43vh")):x.x>=1e3&&x.x<=1600?(S("33rem"),N("43vh")):(S("40rem"),N("33vh")),R(x))}),[x,z]),Object(G.jsx)("div",{children:Object(G.jsx)("div",{className:"book-todo-root-1",style:{minHeight:_},children:Object(G.jsxs)(U.a,{style:{borderColor:D,width:y},children:[Object(G.jsx)(U.a.Header,{variant:"primary",className:"book-todo-card-header",style:{background:D},children:c}),Object(G.jsxs)(U.a.Body,{children:[Object(G.jsx)(U.a.Title,{children:O>0?Object(G.jsxs)("p",{children:["Due date ",u," ( Due ",O," days )"]}):Object(G.jsx)("p",{children:"Not overdue"})}),Object(G.jsxs)(U.a.Text,{as:"div",style:{fontSize:"17px"},children:["Created At: ",f,Object(G.jsx)("br",{}),i," - ",r," - US$",s," - ",Object(G.jsx)("a",{href:d,children:"Link"}),Object(G.jsx)("br",{}),o?"Read":"Unread",Object(G.jsx)("br",{})]}),Object(G.jsx)("div",{className:"book-todo-btn-group-1",children:Object(G.jsx)(p.a,{variant:"danger",onClick:P,children:"Revoke"})})]}),Object(G.jsx)(U.a.Footer,{style:{borderColor:D},children:Object(G.jsxs)("div",{style:{fontWeight:"bold"},children:["Completed time: ",h]})})]})})})}var X=function(){return null!==localStorage.getItem("access_token")&&void 0!==localStorage.getItem("access_token")},Z=function(){localStorage.clear(),sessionStorage.clear()};a(77);var ee=a(127);a(79);var te=[{path:"/todo/book",name:"TodoBook",icon:"",component:function(e){var t=Object(n.useState)(J()),a=Object(b.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)([]),o=Object(b.a)(s,2),i=o[0],d=o[1],u=Object(n.useState)(1),h=Object(b.a)(u,2),O=h[0],x=h[1],m=Object(n.useState)(!0),S=Object(b.a)(m,2),k=S[0],w=S[1],_=void 0===sessionStorage.getItem("book_todo_sort")||null===sessionStorage.getItem("book_todo_sort")?"latest_created_first":sessionStorage.getItem("book_todo_sort"),N=Object(n.useCallback)((function(){O>0?(function(){var e=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(_,!1).then((function(e){var t=e.data.info;d(t),x(0)})).catch((function(e){x(-1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),w(!0)):0===O&&w(!0)}),[_,O]);return q((function(){r(J())}),1e3),Object(n.useEffect)((function(){N()}),[N]),Object(G.jsx)("div",{children:Object(G.jsxs)(f.a,{fluid:!0,children:[Object(G.jsx)(p.a,{className:"book-todo-btn-0",variant:"primary",onClick:function(){w(!1),x(-1)},children:"New"}),Object(G.jsx)(v.a,{variant:"light",className:"book-todo-btn-0",as:g.a,title:"Order By",id:"bg-nested-order-by-dropdown",onSelect:function(e,t){var a,n=M[e].value;a=n,sessionStorage.setItem("book_todo_sort",a),x(1)},children:M.map((function(e,t){return e.value===_?Object(G.jsx)(y.a.Item,{eventKey:t,active:!0,children:Object(G.jsx)("span",{style:{fontSize:"18px"},children:e.value})},e.id):Object(G.jsx)(y.a.Item,{eventKey:t,children:Object(G.jsx)("span",{style:{fontSize:"18px"},children:e.value})},e.id)}))}),k?null:Object(G.jsx)(F,{setRequestUpdate:x,currentWindowSize:c,cardColor:Q()}),i.map((function(e){return Object(G.jsx)("div",{children:Object(G.jsx)(H,{id:e.id,title:e.title,author:e.author,price:e.price,nationality:e.nationality,url:e.url,dueDate:e.due_date,isRead:e.is_read,lastModifyDate:K(e.last_modify_date),createdAt:K(e.created_at),dueDays:e.due_days,willDueDays:e.will_due_days,hideTodoListItem:!1,editEnabled:!1,setRequestUpdate:x,currentWindowSize:c,cardColor:Q()})},e.id)}))]})})},path_prefix:"/user"},{path:"/completed/book",name:"CompletedList",icon:"",component:function(e){var t=Object(n.useState)(J()),a=Object(b.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)([]),o=Object(b.a)(s,2),i=o[0],d=o[1],u=Object(n.useState)(1),h=Object(b.a)(u,2),O=h[0],x=h[1],m=void 0===sessionStorage.getItem("book_todo_sort")||null===sessionStorage.getItem("book_todo_sort")?"latest_created_first":sessionStorage.getItem("book_todo_sort"),p=Object(n.useCallback)((function(){O>0&&function(){var e=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(m,!0).then((function(e){var t=e.data.info;d(t),x(-1)})).catch((function(e){x(-1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[m,O]);return q((function(){r(J())}),1e3),Object(n.useEffect)((function(){p()}),[p]),Object(G.jsx)("div",{children:Object(G.jsxs)(f.a,{fluid:!0,children:[Object(G.jsx)(v.a,{className:"book-todo-btn-0",variant:"light",as:g.a,title:"Order By",id:"bg-nested-order-by-dropdown",onSelect:function(e,t){var a,n=M[e].value;a=n,sessionStorage.setItem("book_todo_sort",a),x(1)},children:M.map((function(e,t){return e.value===m?Object(G.jsx)(y.a.Item,{eventKey:t,active:!0,children:Object(G.jsx)("span",{style:{fontSize:"18px"},children:e.value})},e.id):Object(G.jsx)(y.a.Item,{eventKey:t,children:Object(G.jsx)("span",{style:{fontSize:"18px"},children:e.value})},e.id)}))}),i.map((function(e){return Object(G.jsx)("div",{children:Object(G.jsx)(V,{id:e.id,title:e.title,author:e.author,price:e.price,nationality:e.nationality,url:e.url,dueDate:e.due_date,isRead:e.is_read,lastModifyDate:K(e.last_modify_date),createdAt:K(e.created_at),dueDays:e.due_days,hideTodoListItem:!1,editEnabled:!1,setRequestUpdate:x,currentWindowSize:c,cardColor:Q()})},e.id)}))]})})},path_prefix:"/user"},{path:"/profile",name:"UserProfile",icon:"",component:function(e){var t=void 0===e.currentWindowSize?"28rem":e.currentWindowSize,a=Object(n.useState)(""),c=Object(b.a)(a,2),r=c[0],s=c[1],o=Object(n.useState)(""),i=Object(b.a)(o,2),d=i[0],u=i[1],h=Object(n.useState)("28rem"),O=Object(b.a)(h,2),x=O[0],m=O[1],p=Object(n.useCallback)((function(){(function(){var e=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C().then((function(e){var t=e.data.info;u(t.user),s(t.email)})).catch((function(e){console.error(e.response.data)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);return Object(n.useEffect)((function(){p(),t.x<1e3?m("24rem"):t.x>=1e3&&m("30rem")}),[p,t]),Object(G.jsx)("div",{children:Object(G.jsx)("div",{className:"card-root",children:Object(G.jsx)(f.a,{fluid:!0,children:Object(G.jsx)(U.a,{style:{width:x,height:"16rem"},border:"dark",bg:"light",text:"black",className:"card-mt-1",children:Object(G.jsxs)(E.a,{children:[Object(G.jsx)(U.a.Header,{children:"User Profile"}),Object(G.jsxs)(U.a.Body,{children:[Object(G.jsxs)(E.a.Group,{controlId:"formUsrname",className:"align-items-left-2",children:[Object(G.jsx)(E.a.Label,{className:"form-horizontal.control-label",children:"Usrename"}),Object(G.jsx)(E.a.Control,{type:"text",placeholder:"Username",value:d,disabled:!0})]}),Object(G.jsxs)(E.a.Group,{controlId:"formEmail",className:"align-items-left-2",children:[Object(G.jsx)(E.a.Label,{className:"form-horizontal.control-label",children:"Email"}),Object(G.jsx)(E.a.Control,{type:"email",placeholder:"Email",value:r,disabled:!0})]})]})]})})})})})},path_prefix:"/user"}],ae=[{path:"/login",name:"Login",icon:"",component:function(e){var t=void 0===e.currentWindowSize?"28rem":e.currentWindowSize,a=Object(d.g)(),c=Object(n.useState)(""),r=Object(b.a)(c,2),s=r[0],o=r[1],i=Object(n.useState)(""),l=Object(b.a)(i,2),j=l[0],u=l[1],O=Object(n.useState)(!1),x=Object(b.a)(O,2),m=x[0],v=x[1],g=Object(n.useState)(""),y=Object(b.a)(g,2),S=y[0],k=y[1],_=Object(n.useState)("28rem"),N=Object(b.a)(_,2),C=N[0],I=N[1],z=Object(n.useState)("10.5rem"),R=Object(b.a)(z,2),L=R[0],D=R[1];return Object(n.useEffect)((function(){t.x<1e3?(I("23rem"),D("4.5rem")):t.x>=1e3&&(I("30rem"),D("12.0rem"))}),[t]),Object(G.jsx)("div",{children:Object(G.jsx)(f.a,{children:Object(G.jsx)(W.a,{children:Object(G.jsx)(B.a,{md:12,children:Object(G.jsx)(U.a,{style:{width:C},border:"light",bg:"light",text:"black",className:"card-mt-1",children:Object(G.jsxs)(E.a,{children:[Object(G.jsx)(U.a.Header,{children:"User Login"}),Object(G.jsxs)(U.a.Body,{children:[Object(G.jsxs)(E.a.Group,{controlId:"formUsrname",className:"align-items-left-2",children:[Object(G.jsx)(E.a.Label,{className:"form-horizontal.control-label",children:"Usrename"}),Object(G.jsx)(E.a.Control,{type:"text",placeholder:"Username",onChange:function(e){o(e.target.value)},value:s})]}),Object(G.jsxs)(E.a.Group,{controlId:"formPassword",className:"align-items-left-2",children:[Object(G.jsx)(E.a.Label,{className:"form-horizontal.control-label",children:"Password"}),Object(G.jsx)(E.a.Control,{type:"password",placeholder:"Password",onChange:function(e){u(e.target.value)},value:j})]}),m?Object(G.jsx)("div",{className:"field-error-remind",children:S}):null,Object(G.jsx)("div",{className:"btn-mt-1",children:Object(G.jsx)(p.a,{variant:"primary",block:!0,onClick:function(e){k(""),function(e){return w.post("/sign-in",e)}(JSON.stringify({username:s,password:j})).then((function(e){!function(e,t){localStorage.setItem("access_token",e),localStorage.setItem("refresh_token",t)}(e.data.access,e.data.refresh),v(!1),a.push("/user/todo/book")})).catch((function(e){v(!0),k("Login Failed")}))},disabled:0===s.length||0===j.length,children:"Login"})})]}),Object(G.jsxs)(U.a.Footer,{children:[Object(G.jsx)("span",{style:{textAlign:"left",marginRight:L},children:Object(G.jsx)(h.b,{to:"/session/register",children:Object(G.jsx)(p.a,{variant:"success",children:"Register"})})}),Object(G.jsx)("span",{style:{textAlign:"right"},children:Object(G.jsx)(h.b,{to:"/session/forget-password",children:"Forget your password?"})})]})]})})})})})})},path_prefix:"/session"},{path:"/logout",name:"Logout",icon:"",component:function(){var e=Object(d.g)(),t=Object(n.useCallback)((function(){(function(){var t=Object(j.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a={refresh:localStorage.getItem("refresh_token")},I(a).then((function(t){Z(),X()||!0!==t.data.allow_logout||e.push("/session/login")})).catch((function(t){Z(),e.push("/session/login")}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]);return Object(n.useEffect)((function(){t()}),[t]),Object(G.jsx)("div",{})},path_prefix:"/session"},{path:"/register",name:"Register",icon:"",component:function(e){var t=void 0===e.currentWindowSize?"28rem":e.currentWindowSize,a=Object(n.useState)(""),c=Object(b.a)(a,2),r=c[0],s=c[1],o=Object(n.useState)(""),i=Object(b.a)(o,2),l=i[0],j=i[1],d=Object(n.useState)(""),u=Object(b.a)(d,2),O=u[0],x=u[1],m=Object(n.useState)(""),v=Object(b.a)(m,2),g=v[0],y=v[1],S=Object(n.useState)(!1),k=Object(b.a)(S,2),_=k[0],N=k[1],C=Object(n.useState)(!1),I=Object(b.a)(C,2),z=I[0],R=I[1],L=Object(n.useState)(""),D=Object(b.a)(L,2),P=D[0],A=D[1],T=Object(n.useState)(""),H=Object(b.a)(T,2),F=H[0],M=H[1],Y=Object(n.useState)(!1),K=Object(b.a)(Y,2),q=K[0],J=K[1],$=Object(n.useState)(""),Q=Object(b.a)($,2),V=Q[0],X=Q[1],Z=Object(n.useState)("28rem"),te=Object(b.a)(Z,2),ae=te[0],ne=te[1],ce=function(){X(""),J(!1)};return Object(n.useEffect)((function(){t.x<1e3?ne("23rem"):t.x>=1e3&&t.x<=1600?ne("28rem"):ne("31rem")}),[t]),Object(G.jsx)("div",{children:Object(G.jsx)(f.a,{fluid:!0,children:Object(G.jsx)(W.a,{children:Object(G.jsx)(B.a,{md:12,children:Object(G.jsx)(U.a,{style:{width:ae},border:"black",bg:"light",text:"black",className:"card-mt-1",children:Object(G.jsxs)(E.a,{children:[Object(G.jsx)(U.a.Header,{children:"User Register"}),Object(G.jsxs)(U.a.Body,{children:[_?Object(G.jsx)("div",{children:Object(G.jsxs)(ee.a,{variant:"success",children:[Object(G.jsx)(ee.a.Heading,{children:"Register Successfully"}),Object(G.jsx)("p",{children:z}),Object(G.jsx)("hr",{}),Object(G.jsx)("div",{className:"btn-mt-1",children:Object(G.jsx)(p.a,{variant:"primary",onClick:function(){ce(),function(e){return w.post("/reissue-activate",e)}({username:l,email:r}).then((function(e){var t=e.data;200===e.status&&!0===t.is_reissue&&(X(t.message),J(!0),N(!1))})).catch((function(e){ce()}))},children:"\u672a\u6536\u5230\u8a8d\u8b49\u4fe1?"})})]})}):null,q?Object(G.jsx)("div",{children:Object(G.jsxs)(ee.a,{variant:"success",children:[Object(G.jsx)(ee.a.Heading,{children:"Reissue Successfully"}),Object(G.jsx)("p",{children:V})]})}):null,Object(G.jsxs)(E.a.Group,{controlId:"formUsrname",className:"align-items-left-2",children:[Object(G.jsx)(E.a.Label,{className:"form-horizontal.control-label",children:"Usrename"}),Object(G.jsx)(E.a.Control,{type:"text",placeholder:"Username",onChange:function(e){j(e.target.value)},value:l}),Object(G.jsx)("p",{className:"field-alert",children:P})]}),Object(G.jsxs)(E.a.Group,{controlId:"formEmail",className:"align-items-left-2",children:[Object(G.jsx)(E.a.Label,{className:"form-horizontal.control-label",children:"Email"}),Object(G.jsx)(E.a.Control,{type:"email",placeholder:"Email",onChange:function(e){s(e.target.value)},value:r}),Object(G.jsx)("p",{className:"field-alert",children:F})]}),Object(G.jsxs)(E.a.Group,{controlId:"formPassword",className:"align-items-left-2",children:[Object(G.jsx)(E.a.Label,{className:"form-horizontal.control-label",children:"Password"}),Object(G.jsx)(E.a.Control,{type:"password",placeholder:"Password",onChange:function(e){x(e.target.value)},value:O})]}),Object(G.jsxs)(E.a.Group,{controlId:"formRePassword",className:"align-items-left-2",children:[Object(G.jsx)(E.a.Label,{className:"form-horizontal.control-label",children:"Re-enter Password"}),Object(G.jsx)(E.a.Control,{type:"password",placeholder:"Re-Enter Password",onChange:function(e){y(e.target.value)},value:g})]}),Object(G.jsx)(p.a,{variant:"primary",block:!0,onClick:function(){(A(""),M(""),"admin"===l)?A("The username 'admin' disable"):function(e){return w.post("",e)}({username:l,email:r,password:O}).then((function(e){var t=e.data;!0===t.is_registered&&(N(!0),R(t.message))})).catch((function(e){N(!1);var t=e.response.data.error;!0===t.is_username_registered&&!0===t.is_email_registered?(A("The username has been use"),M("The email has been registerd")):!0!==t.is_username_registered&&!0!==t.is_email_registered||(!0===t.is_username_registered?A("The username has been use"):M("The email has been registerd"))}))},disabled:0===l.length||0===r.length||0===O.length||0===g.length||O!==g,children:"Sign up"})]}),Object(G.jsx)(U.a.Footer,{children:Object(G.jsxs)("div",{style:{textAlign:"center"},children:["Already have account? ",Object(G.jsx)(h.b,{to:"/session/login",children:"Sign in"})]})})]})})})})})})},path_prefix:"/session"},{path:"/confirm-account",name:"ConfirmAccount",icon:"",component:function(){var e=Object(d.g)(),t=Object(d.h)().search,a=new URLSearchParams(t).get("token"),c=Object(n.useState)(!1),r=Object(b.a)(c,2),s=r[0],o=r[1],i=Object(n.useState)(1e3),u=Object(b.a)(i,1)[0],h=Object(n.useState)(5),O=Object(b.a)(h,2),x=O[0],m=O[1],v=Object(n.useState)(!1),g=Object(b.a)(v,2),y=g[0],S=g[1],k=Object(n.useState)(""),w=Object(b.a)(k,2),_=w[0],N=w[1];q((function(){0===x?e.push("/session/login"):m(x-1)}),s?u:null);var C=function(){e.push("/session/login")},I=Object(n.useCallback)((function(){N(""),function(){var e=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:z({token:a}).then((function(e){!0===e.data.is_account_validated&&200===e.status?(o(!0),S(!1)):(o(!1),S(!0))})).catch((function(e){o(!1),S(!0),N(e.response.data.error)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[a]);return Object(n.useEffect)((function(){I()}),[I]),Object(G.jsx)("div",{children:Object(G.jsxs)(f.a,{fluid:!0,children:[Object(G.jsx)(W.a,{children:s?Object(G.jsx)("div",{children:Object(G.jsxs)(ee.a,{show:!0,variant:"success",children:[Object(G.jsx)(ee.a.Heading,{children:"Register Account Activated Successfully"}),Object(G.jsx)("div",{className:"alert-text-1",children:Object(G.jsxs)("p",{children:["Will be jump to sign page: ",x]})}),Object(G.jsx)("hr",{}),Object(G.jsx)("div",{className:"d-flex justify-content-end",children:Object(G.jsx)(p.a,{variant:"primary",onClick:C,children:"Sign in now"})})]})}):null}),Object(G.jsx)(W.a,{children:y?Object(G.jsxs)(ee.a,{variant:"danger",children:[Object(G.jsx)(ee.a.Heading,{children:"Register Account Activate Failed"}),Object(G.jsx)("div",{className:"alert-text-1",children:Object(G.jsx)("p",{children:_})}),Object(G.jsx)("hr",{}),Object(G.jsx)("div",{className:"d-flex justify-content-end",children:Object(G.jsx)(p.a,{variant:"danger",onClick:C,children:"Return to sign in"})})]}):null})]})})},path_prefix:"/session"},{path:"/forget-password",name:"ApplyResetPassword",icon:"",component:function(e){var t=void 0===e.currentWindowSize?"28rem":e.currentWindowSize,a=Object(n.useState)(""),c=Object(b.a)(a,2),r=c[0],s=c[1],o=Object(n.useState)(!1),i=Object(b.a)(o,2),l=i[0],j=i[1],d=Object(n.useState)(!1),u=Object(b.a)(d,2),O=u[0],x=u[1],m=Object(n.useState)("28rem"),v=Object(b.a)(m,2),g=v[0],y=v[1],S=Object(n.useState)("10.5rem"),k=Object(b.a)(S,2),_=k[0],N=k[1];return Object(n.useEffect)((function(){t.x<1e3?(y("23rem"),N("4.2rem")):t.x>=1e3&&t.x<=1600?(y("27rem"),N("8.3rem")):(y("30rem"),N("11.3rem"))}),[t]),Object(G.jsx)("div",{children:Object(G.jsx)(f.a,{children:Object(G.jsx)(W.a,{children:Object(G.jsx)(B.a,{md:12,children:Object(G.jsx)(U.a,{style:{width:g},border:"light",bg:"light",text:"black",className:"card-mt-1",children:Object(G.jsxs)(E.a,{children:[Object(G.jsx)(U.a.Header,{children:"Apply Reset Password"}),Object(G.jsxs)(U.a.Body,{children:[l?Object(G.jsxs)(ee.a,{variant:"success",children:[Object(G.jsx)(ee.a.Heading,{children:"Apply Success"}),Object(G.jsx)("p",{className:"mb-0",children:"Please go to your mailbox to receive the reset password email"})]}):null,O?Object(G.jsxs)(ee.a,{variant:"danger",children:[Object(G.jsx)(ee.a.Heading,{children:"Apply Failed"}),Object(G.jsx)("p",{className:"mb-0",children:"Please check field whether or enter duplicate username or email"})]}):null,Object(G.jsxs)(E.a.Group,{controlId:"formEmail",className:"align-items-left-2",children:[Object(G.jsx)(E.a.Label,{className:"form-horizontal.control-label",children:"Email"}),Object(G.jsx)(E.a.Control,{type:"text",placeholder:"Email",onChange:function(e){s(e.target.value)},value:r})]})]}),Object(G.jsxs)(U.a.Footer,{children:[Object(G.jsx)("span",{style:{textAlign:"left",marginRight:_},children:Object(G.jsx)(p.a,{variant:"primary",onClick:function(){(function(e){return w.post("/forget-password",e)})({email:r}).then((function(e){e.data.apply_reset_success&&(x(!1),j(!0))})).catch((function(e){x(!0),j(!1)}))},disabled:0===r.length,children:"Apply Reset Password"})}),Object(G.jsx)("span",{style:{textAlign:"right"},children:Object(G.jsx)(h.b,{to:"/session/login",children:Object(G.jsx)(p.a,{variant:"danger",children:"Return"})})})]})]})})})})})})},path_prefix:"/session"},{path:"/reset-password",name:"ResetPassword",icon:"",component:function(e){var t=void 0===e.currentWindowSize?"28rem":e.currentWindowSize,a=Object(d.g)(),c=Object(d.h)().search,r=new URLSearchParams(c).get("token"),s=Object(n.useState)(""),o=Object(b.a)(s,2),i=o[0],l=o[1],j=Object(n.useState)(""),u=Object(b.a)(j,2),h=u[0],O=u[1],x=Object(n.useState)(!1),m=Object(b.a)(x,2),v=m[0],g=m[1],y=Object(n.useState)(!1),S=Object(b.a)(y,2),k=S[0],_=S[1],N=Object(n.useState)(1e3),C=Object(b.a)(N,1)[0],I=Object(n.useState)(5),z=Object(b.a)(I,2),R=z[0],L=z[1],D=Object(n.useState)(""),P=Object(b.a)(D,2),A=P[0],H=P[1],F=Object(n.useState)("28rem"),M=Object(b.a)(F,2),Y=M[0],K=M[1];return q((function(){0===R?a.push("/session/login"):L(R-1)}),k?C:null),Object(n.useEffect)((function(){t.x<1e3?K("22rem"):t.x>=1e3&&K("30rem")}),[t]),Object(G.jsx)("div",{children:Object(G.jsxs)(f.a,{fluid:!0,children:[k?Object(G.jsx)("div",{children:Object(G.jsxs)(T.a,{show:k,backdrop:"static",keyboard:!1,children:[Object(G.jsx)(T.a.Header,{children:Object(G.jsx)(T.a.Title,{children:"Reset Password Successfully"})}),Object(G.jsxs)(T.a.Body,{children:["Will be jump to sign page: ",R]}),Object(G.jsx)(T.a.Footer,{children:Object(G.jsx)(p.a,{variant:"primary",onClick:function(){a.push("/session/login")},children:"Sign in now"})})]})}):null,Object(G.jsx)(W.a,{children:Object(G.jsx)(B.a,{md:12,children:Object(G.jsx)(U.a,{style:{width:Y},border:"black",bg:"light",text:"black",className:"card-mt-1",children:Object(G.jsxs)(E.a,{children:[Object(G.jsx)(U.a.Header,{children:"Reset Password"}),Object(G.jsxs)(U.a.Body,{children:[v?Object(G.jsxs)(ee.a,{variant:"danger",children:[Object(G.jsx)(ee.a.Heading,{children:"Reset Password Failed"}),Object(G.jsx)("p",{className:"mb-0",children:A})]}):null,Object(G.jsxs)(E.a.Group,{controlId:"formPassword",className:"align-items-left-2",children:[Object(G.jsx)(E.a.Label,{className:"form-horizontal.control-label",children:"New Password"}),Object(G.jsx)(E.a.Control,{type:"password",placeholder:"New Password",onChange:function(e){l(e.target.value)},value:i})]}),Object(G.jsxs)(E.a.Group,{controlId:"formRePassword",className:"align-items-left-2",children:[Object(G.jsx)(E.a.Label,{className:"form-horizontal.control-label",children:"Re-enter New Password"}),Object(G.jsx)(E.a.Control,{type:"password",placeholder:"Re-Enter New Password",onChange:function(e){O(e.target.value)},value:h})]})]}),Object(G.jsx)(U.a.Footer,{children:Object(G.jsx)("div",{className:"link-mt-1",children:Object(G.jsx)(p.a,{variant:"primary",block:!0,onClick:function(){(function(e){return w.post("/reset-password",e)})({token:r,new_password:i}).then((function(e){200===e.status&&e.data.is_password_changed?(g(!1),_(!0)):(g(!0),_(!1))})).catch((function(e){g(!0),_(!1),H(e.response.data.error)}))},disabled:0===i.length||0===h.length||i!==h,children:"Reset Password"})})})]})})})})]})})},path_prefix:"/session"}];function ne(e){var t=Object(d.h)(),a=void 0===e.username?null:e.username;return Object(G.jsx)(O.a,{bg:"dark",variant:"dark",expand:"lg",collapseOnSelect:!0,children:Object(G.jsxs)(f.a,{fluid:!0,children:[Object(G.jsx)(O.a.Brand,{children:function(){for(var e=0;e<te.length;e++)if(-1!==t.pathname.indexOf(te[e].path_prefix+te[e].path))return te[e].name}()}),Object(G.jsx)(O.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(G.jsxs)(O.a.Collapse,{id:"basic-navbar-nav",children:[Object(G.jsxs)(x.a,{className:"mr-auto",children:[Object(G.jsxs)(m.a,{title:"Guide",id:"basic-nav-dropdown",children:[Object(G.jsx)(m.a.Item,{eventKey:"5",as:h.b,to:"/user/todo/book",children:"BookTodo"}),Object(G.jsx)(m.a.Divider,{}),Object(G.jsx)(m.a.Item,{eventKey:"6",as:h.b,to:"/user/completed/book",children:"CompelteTodo"})]}),Object(G.jsxs)(m.a,{title:"User",id:"basic-nav-dropdown",children:[Object(G.jsx)(m.a.Item,{eventKey:"5",as:h.b,to:"/user/profile",children:"Profile"}),Object(G.jsx)(m.a.Divider,{}),Object(G.jsx)(m.a.Item,{eventKey:"6",as:h.b,to:"/session/logout",children:"Logout"})]})]}),Object(G.jsx)(x.a.Item,{className:"ml-auto",children:Object(G.jsxs)(O.a.Text,{style:{color:"white",fontSize:"18px"},children:["Signed in as: ",Object(G.jsx)("span",{style:{fontWeight:"bold"},children:a})]})})]})]})})}a(115);function ce(e){var t=Object(d.g)(),a=Object(n.useRef)(null),c=Object(n.useState)(!1),r=Object(b.a)(c,2),s=r[0],i=r[1],h=Object(n.useState)(""),O=Object(b.a)(h,2),f=O[0],x=O[1],m=Object(n.useState)(6e4),p=Object(b.a)(m,2),v=p[0],g=p[1],y=Object(n.useCallback)((function(){var e=function(){var e=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(f.length<1||""===f)){e.next=3;break}return e.next=3,C().then((function(e){var t=e.data.info;x(t.user)})).catch((function(e){}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=function(){var a=Object(j.a)(l.a.mark((function a(){var n;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n={refresh:localStorage.getItem("refresh_token")},a.next=3,N(n).then((function(t){localStorage.setItem("access_token",t.data.access),i(!0),e()})).catch((function(e){i(!1);var a={refresh:localStorage.getItem("refresh_token")};I(a).then((function(e){Z(),X()||!0!==e.data.allow_logout||t.push("/session/login")})).catch((function(e){Z(),t.push("/session/login")}))}));case 3:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();(function(){var t=Object(j.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.post("/token-expire-check",{token:localStorage.getItem("access_token")}).then((function(t){var n=t.data.token_time_left;n>60?g(6e4):60===n?g(2e4):n>=30&&n<=60?g(1e4):n<=30&&a(),i(!0),e()})).catch((function(e){a()}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[t,f]),S=function(){var e=function(e){var a,n=null,c=0,r=Object(u.a)(e);try{var s=function(){var e=a.value;if("/user"===e.path_prefix&&t.location.pathname===e.path_prefix+e.path)return n=Object(G.jsx)(d.b,{path:e.path_prefix+e.path,render:function(t){return Object(G.jsx)(e.component,Object(o.a)({},t))}},c),"break";c++};for(r.s();!(a=r.n()).done&&"break"!==s(););}catch(i){r.e(i)}finally{r.f()}return c=0,n}(te);return window.performance&&1===performance.navigation.type&&y(),e}();return q((function(){y()}),v),Object(n.useEffect)((function(){y()}),[y]),Object(G.jsx)("div",{children:Object(G.jsx)("div",{className:"wrapper",children:Object(G.jsx)("div",{className:"mainPanel",ref:a,children:s?null===S?Object(G.jsx)(d.a,{to:"/404"}):Object(G.jsxs)("div",{children:[Object(G.jsx)(ne,{username:f}),S]}):null})})})}function re(){var e=Object(d.g)();return Object(G.jsx)("div",{className:"root",children:function(){var t=function(t){var a,n=null,c=0,r=Object(u.a)(t);try{var s=function(){var t=a.value;if("/session"===t.path_prefix&&e.location.pathname===t.path_prefix+t.path)return n=Object(G.jsx)(d.b,{path:t.path_prefix+t.path,render:function(e){return Object(G.jsx)(t.component,Object(o.a)(Object(o.a)({},e),{},{currentWindowSize:J()}))}},c),"break";c++};for(r.s();!(a=r.n()).done&&"break"!==s(););}catch(i){r.e(i)}finally{r.f()}return c=0,n}(ae);return null===t?Object(G.jsx)(d.a,{to:"/404"}):Object(G.jsx)("div",{children:t})}()})}var se=function(){return Object(G.jsx)("div",{children:Object(G.jsx)("h1",{children:"404 Error Not Found Match Page."})})};function oe(){var e=Object(d.g)(),t=Object(d.h)().search,a=Object(n.useCallback)((function(){var a=String(e.location.pathname.split("/",2)).replace(",","/"),n=e.location.pathname+t;if("/session"===a&&t.length>0)e.push(n);else if("/session"===a&&t.length<1)"/"===n?e.push("/session/login"):e.push(n);else{(function(){var t=Object(j.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:X()?"/"===n?e.push("/user/todo/book"):e.push(n):e.push("/session/login");case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}}),[e,t]);return Object(n.useEffect)((function(){a()}),[a]),Object(G.jsxs)(d.d,{children:[Object(G.jsx)(d.b,{path:"/404",component:se}),Object(G.jsx)(d.b,{path:"/session",render:function(e){return Object(G.jsx)(re,Object(o.a)({},e))}}),Object(G.jsx)(d.b,{exect:!0,path:"/user",render:function(e){return Object(G.jsx)(ce,Object(o.a)({},e))}})]})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ie=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,135)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))};a(116);s.a.render(Object(G.jsx)(c.a.StrictMode,{children:Object(G.jsx)(h.a,{children:Object(G.jsx)(oe,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),ie()},30:function(e,t,a){},77:function(e,t,a){},79:function(e,t,a){},87:function(e,t,a){}},[[117,1,2]]]);
//# sourceMappingURL=main.7d39be07.chunk.js.map